#
# script to combine mandelbrot image
# argument of number of chares required
#

dim=$1

cd ./build/

files=*.tif

for ifile in $files
do
 filearray[${ifile%%.*}]=$ifile
done

echo Files to process: ${#filearray[@]}

rm outputfile.txt
for i in ${filearray[@]}
do
 basename $i >> outputfile.txt
done

montage `cat outputfile.txt`  -geometry +0+0 -tile 1x$dim intermediate.tif
montage intermediate.tif -geometry +0+0 -tile $dim final_mandelbrot.tif

echo Compilation complete.
